# ADR-004: Опциональный backend для статусов и новостей vs полностью статический портал

- **Статус:** принят
- **Дата:** 2025-11-25

## Контекст

Портал входа в ЛК ГИИС ЭБ показывает:
- статус подсистем («Авария» / «Работает штатно»);
- новости и уведомления;
- ссылки на скачивание мастера и инструкции.

Эти данные могут:
- редко меняться (инструкция, дистрибутив мастера);
- меняться динамически (аварии подсистем, новости).

Нужно решить:
- использовать ли отдельный backend-сервис для статусов/новостей,
- или ограничиться чистой статикой (HTML + JSON-файлы на веб-сервере).

## Решение

Принято комбинированное решение:

1. **Базовый вариант (минимальная зависимость):**
   - портал раздаёт статические файлы:
     - HTML/CSS/JS;
     - мастера Windows/Linux;
     - инструкцию PDF;
     - JSON-файлы `status.json` и `news.json`;
   - обновление статуса/новостей выполняется путём перезаписи этих файлов.

2. **Опциональный backend:**
   - при необходимости может быть развернут лёгкий сервис (REST/API),
     отдающий статусы и новости;
   - фронтенд может работать и со статикой, и с backend, в зависимости от конфигурации.

## Аргументы в пользу решения

- **Простота базового сценария.**
  - Для запуска достаточно Nginx/Apache с выдачей статического контента.
  - Не требуется отдельная БД и сложная логика.

- **Гибкость дальше.**
  - При росте требований (частые обновления новостей, интеграция с мониторингом) можно добавить backend без изменения мастера и без ломки интерфейса.

- **Независимость мастера.**
  - Мастер не завязан на backend, он скачивается как обычный файл и работает локально.

## Рассмотренные альтернативы

### Вариант A: Только backend

Весь контент (включая ссылки на файлы) отдаётся из backend-сервиса.

**Минусы:**
- усложнение инфраструктуры;
- необходимость высокой доступности backend;
- повышенные требования к мониторингу.

**Вывод:** признано избыточным для стартовой версии.

### Вариант B: Только статика, без опции backend

Статусы и новости обновляются только заменой файлов `status.json` и `news.json`.

**Плюсы:**
- максимально простой вариант.

**Минусы:**
- ограниченные возможности интеграции с другими системами;
- сложнее автоматизировать обновление статусов и новостей.

**Вывод:** ограничивает развитие системы, поэтому выбран гибридный подход с возможностью добавить backend.

## Последствия

### Положительные

- Быстрый вывод первой версии (MVP) на чистой статике.
- Возможность эволюционного перехода к backend при необходимости.
- Архитектура мастера никак не усложняется.

### Отрицательные

- На старте администрирование статусов/новостей может быть «ручным» (обновление файлов).
- Добавление backend в будущем потребует отдельных работ по деплою и мониторингу (но не затрагивает мастера и клиентов). 
